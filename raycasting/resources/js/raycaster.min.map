{"version":3,"file":"raycaster.min.js","sources":["util.js","virtualkeys.js","player.js","controls.js","bitmap.js","gamemap.js","camera.js","gameloop.js","main.js"],"names":["Engine","Util","clamp","baseNumber","lowerBound","upperBound","tempNumber","Math","max","min","CIRCLE","PI","VirtualKey","_VirtualKey","Player","_Player","Direction","MOVEMENT_SPEED","HORIZONTAL_VIEW_SPEED","VERTICAL_VIEW_SPEED","CROUCH_SPEED","JUMP_HEIGHT","JUMP_SPEED","MAX_CROUCH_MOD","MIN_CROUCH_MOD","MAX_JUMP_MOD","Infinity","MIN_JUMP_MOD","MAX_VIEW_MOD","MIN_VIEW_MOD","DIRECTION_STATE_TABLE","DIRECTION_TABLE",1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,"x","y","direction","this","crouchModifier","jumpModifier","viewAngle","verticalVelocity","moveWhileJumping","prototype","rotate","angle","walk","distance","map","move","dx","cos","dy","sin","get","changeCrouchModifier","delta","changeJumpModifier","changeViewAngle","update","states","timestep","jumpDirection","onGround","console","log","getHeightInformation","heightModifier","Controls","_Controls","_this","inputs","_","each","values","value","document","addEventListener","onKey","bind","onMouseMove","body","onclick","requestPointerLock","mozRequestPointerLock","webkitRequestPointerLock","val","e","state","keyCode","preventDefault","stopPropagation","leftState","rightState","upState","downState","movementX","mozMovementX","webkitMovementX","movementY","mozMovementY","webkitMovementY","setTimeout","onMouseMoveEnd","Bitmap","_Bitmap","src","width","height","image","Image","GameMap","_GameMap","DEFAULT_WALL_PROBABILITY","NO_WALL","length","size","wallGrid","Uint8Array","skybox","wallTexture","floor","randomize","probability","wallProbability","i","random","cast","point","range","ray","origin","stepX","step","stepY","nextStep","inspect","concat","rise","run","inverted","ceil","shiftX","shiftY","offset","self","sqrt","Camera","_Camera","HORIZONTAL_BUFFER","CLARITY_FACTOR","DEFAULT_FOCAL_LENGTH","DEFAULT_RANGE","VERTICAL_BUFFER","canvas","resolution","focalLength","context","getContext","window","innerWidth","innerHeight","spacing","cameraHeight","render","entity","drawSky","drawColumns","sky","left","save","drawSkyPartial","canvasOffsetX","drawImage","restore","column","atan2","drawColumn","texture","hit","s","textureX","wall","project","top","z","wallHeight","bottom","GameLoop","_GameLoop","DEFAULT_TIMESTEP","MILLISECONDS_PER_SECOND","frameCallback","frame","lastTime","accumulator","updateCallback","renderCallback","start","requestAnimationFrame","time","seconds","Main","exec","display","getElementById","player","controls","camera","loop"],"mappings":"AAAA,YACA,IAAIA,SACJ,SAAWA,GACP,GAAIC,IACJ,SAAWA,GAEP,QAASC,GAAMC,EAAYC,EAAYC,GACnC,GAAIC,GAAaC,KAAKC,IAAIL,EAAYC,EACtC,OAAOG,MAAKE,IAAIH,EAAYD,GAHhCJ,EAAKS,OAAmB,EAAVH,KAAKI,GAKnBV,EAAKC,MAAQA,GACdD,EAAOD,EAAOC,OAASD,EAAOC,WAClCD,SAAWA,WCXd,IAAIA,SACJ,SAAWA,GACP,GAAIY,IACJ,SAAWC,IACP,SAAWD,GAEPA,EAAWA,EAAsB,UAAI,GAAK,YAE1CA,EAAWA,EAAoB,QAAI,GAAK,UAExCA,EAAWA,EAA0B,cAAI,GAAK,gBAE9CA,EAAWA,EAAmB,OAAI,GAAK,SAEvCA,EAAWA,EAAqB,SAAI,IAAM,WAE1CA,EAAWA,EAAsB,UAAI,IAAM,YAE3CA,EAAWA,EAAqB,SAAI,IAAM,WAE1CA,EAAWA,EAAqB,SAAI,IAAM,WAE1CA,EAAWA,EAAuB,WAAI,IAAM,aAE5CA,EAAWA,EAAmB,OAAI,IAAM,SAExCA,EAAWA,EAAqB,SAAI,IAAM,WAE1CA,EAAWA,EAAyB,aAAI,IAAM,eAE9CA,EAAWA,EAAsB,UAAI,IAAM,YAE3CA,EAAWA,EAAqB,SAAI,IAAM,WAE1CA,EAAWA,EAAuB,WAAI,IAAM,aAE5CA,EAAWA,EAAyB,aAAI,IAAM,eAE9CA,EAAWA,EAAmB,OAAI,IAAM,SAExCA,EAAWA,EAAoB,QAAI,IAAM,UAEzCA,EAAWA,EAAoB,QAAI,IAAM,UAEzCA,EAAWA,EAAkB,MAAI,IAAM,QAEvCA,EAAWA,EAAqB,SAAI,IAAM,WAE1CA,EAAWA,EAAoB,QAAI,IAAM,UAEzCA,EAAWA,EAA2B,eAAI,IAAM,iBAEhDA,EAAWA,EAAsB,UAAI,IAAM,YAE3CA,EAAWA,EAAsB,UAAI,IAAM,YAE3CA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAqB,SAAI,IAAM,WAE1CA,EAAWA,EAAyB,aAAI,IAAM,eAE9CA,EAAWA,EAAyB,aAAI,IAAM,eAE9CA,EAAWA,EAAsB,UAAI,IAAM,YAE3CA,EAAWA,EAA4B,gBAAI,IAAM,kBAEjDA,EAAWA,EAA6B,iBAAI,IAAM,mBAElDA,EAAWA,EAAkB,MAAI,IAAM,QAEvCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAAiB,KAAI,IAAM,OAEtCA,EAAWA,EAA4B,gBAAI,IAAM,kBAEjDA,EAAWA,EAAuB,WAAI,IAAM,aAE5CA,EAAWA,EAAuB,WAAI,IAAM,aAE5CA,EAAWA,EAAuB,WAAI,IAAM,aAE5CA,EAAWA,EAAuB,WAAI,IAAM,aAE5CA,EAAWA,EAAuB,WAAI,KAAO,aAE7CA,EAAWA,EAAuB,WAAI,KAAO,aAE7CA,EAAWA,EAAuB,WAAI,KAAO,aAE7CA,EAAWA,EAAuB,WAAI,KAAO,aAE7CA,EAAWA,EAAuB,WAAI,KAAO,aAE7CA,EAAWA,EAAuB,WAAI,KAAO,aAE7CA,EAAWA,EAAwB,YAAI,KAAO,cAE9CA,EAAWA,EAAmB,OAAI,KAAO,SAEzCA,EAAWA,EAAyB,aAAI,KAAO,eAE/CA,EAAWA,EAAwB,YAAI,KAAO,cAE9CA,EAAWA,EAAuB,WAAI,KAAO,aAE7CA,EAAWA,EAAsB,UAAI,KAAO,YAE5CA,EAAWA,EAAkB,MAAI,KAAO,QAExCA,EAAWA,EAAkB,MAAI,KAAO,QAExCA,EAAWA,EAAkB,MAAI,KAAO,QAExCA,EAAWA,EAAkB,MAAI,KAAO,QAExCA,EAAWA,EAAkB,MAAI,KAAO,QAExCA,EAAWA,EAAkB,MAAI,KAAO,QAExCA,EAAWA,EAAkB,MAAI,KAAO,QAExCA,EAAWA,EAAkB,MAAI,KAAO,QAExCA,EAAWA,EAAkB,MAAI,KAAO,QAExCA,EAAWA,EAAmB,OAAI,KAAO,SAEzCA,EAAWA,EAAmB,OAAI,KAAO,SAEzCA,EAAWA,EAAmB,OAAI,KAAO,SAEzCA,EAAWA,EAAmB,OAAI,KAAO,SAEzCA,EAAWA,EAAmB,OAAI,KAAO,SAEzCA,EAAWA,EAAmB,OAAI,KAAO,SAEzCA,EAAWA,EAAmB,OAAI,KAAO,SAEzCA,EAAWA,EAAmB,OAAI,KAAO,SAEzCA,EAAWA,EAAmB,OAAI,KAAO,SAEzCA,EAAWA,EAAmB,OAAI,KAAO,SAEzCA,EAAWA,EAAmB,OAAI,KAAO,SAEzCA,EAAWA,EAAmB,OAAI,KAAO,SAEzCA,EAAWA,EAAmB,OAAI,KAAO,SAEzCA,EAAWA,EAAmB,OAAI,KAAO,SAEzCA,EAAWA,EAAmB,OAAI,KAAO,SAEzCA,EAAWA,EAAwB,YAAI,KAAO,cAE9CA,EAAWA,EAA2B,eAAI,KAAO,iBAEjDA,EAAWA,EAA0B,cAAI,KAAO,gBAEhDA,EAAWA,EAA2B,eAAI,KAAO,iBAEjDA,EAAWA,EAA4B,gBAAI,KAAO,kBAElDA,EAAWA,EAAoB,QAAI,KAAO,UAE1CA,EAAWA,EAAsB,UAAI,KAAO,YAE5CA,EAAWA,EAAuB,WAAI,KAAO,aAE7CA,EAAWA,EAAyB,aAAI,KAAO,eAE/CA,EAAWA,EAA0B,cAAI,KAAO,gBAEhDA,EAAWA,EAA0B,cAAI,KAAO,gBAEhDA,EAAWA,EAA2B,eAAI,KAAO,iBAEjDA,EAAWA,EAAwB,YAAI,KAAO,cAE9CA,EAAWA,EAAoB,QAAI,KAAO,UAE1CA,EAAWA,EAAoB,QAAI,KAAO,UAE1CA,EAAWA,EAA4B,gBAAI,KAAO,kBAElDA,EAAWA,EAAkC,sBAAI,KAAO,wBAExDA,EAAWA,EAAmC,uBAAI,KAAO,yBAEzDA,EAAWA,EAAqB,SAAI,KAAO,WAE3CA,EAAWA,EAAqB,SAAI,KAAO,WAE3CA,EAAWA,EAAsB,UAAI,KAAO,YAE5CA,EAAWA,EAAqB,SAAI,KAAO,WAE3CA,EAAWA,EAA0B,cAAI,KAAO,gBAEhDA,EAAWA,EAA4B,gBAAI,KAAO,kBAElDA,EAAWA,EAA0B,cAAI,KAAO,gBAEhDA,EAAWA,EAA6B,iBAAI,KAAO,mBAEnDA,EAAWA,EAAqB,SAAI,KAAO,WAE3CA,EAAWA,EAAoB,QAAI,KAAO,UAE1CA,EAAWA,EAAqB,SAAI,KAAO,WAG3CA,EAAWA,EAAmB,OAAI,IAAM,SAExCA,EAAWA,EAAoB,QAAI,IAAM,UAEzCA,EAAWA,EAAsB,UAAI,IAAM,YAE3CA,EAAWA,EAAoB,QAAI,IAAM,UAEzCA,EAAWA,EAAqB,SAAI,IAAM,WAE1CA,EAAWA,EAAqB,SAAI,IAAM,WAE1CA,EAAWA,EAAqB,SAAI,IAAM,WAE1CA,EAAWA,EAAqB,SAAI,IAAM,WAE1CA,EAAWA,EAAuB,WAAI,IAAM,aAE5CA,EAAWA,EAA0B,cAAI,IAAM,gBAE/CA,EAAWA,EAAsB,UAAI,IAAM,YAE3CA,EAAWA,EAA0B,cAAI,IAAM,gBAE/CA,EAAWA,EAAsB,UAAI,IAAM,YAE3CA,EAAWA,EAAqB,SAAI,IAAM,WAE1CA,EAAWA,EAAuB,WAAI,IAAM,aAE5CA,EAAWA,EAAqB,SAAI,IAAM,YAC3CC,EAAYD,aAAeC,EAAYD,eACzBC,GAAYD,YAC9BA,EAAaZ,EAAOY,aAAeZ,EAAOY,iBAC9CZ,SAAWA,WC7Td,IAAIA,SACJ,SAAWA,GACP,GAAIc,IACJ,SAAWC,GACP,GAaIC,GAbAf,EAAOD,EAAOC,KACdgB,EAAiB,IACjBC,EAAwB,IACxBC,EAAsB,IACtBC,EAAe,IACfC,EAAc,GACdC,EAAa,EACbC,EAAiB,EACjBC,EAAiB,IACjBC,EAAeC,EAAAA,EACfC,EAAe,EACfC,EAAe,IACfC,EAAe,MAEnB,SAAWb,GACPA,EAAUA,EAAmB,QAAI,GAAK,UACtCA,EAAUA,EAAiB,MAAI,GAAK,QACpCA,EAAUA,EAAoB,SAAI,GAAK,WACvCA,EAAUA,EAAgB,KAAI,GAAK,QACpCA,IAAcA,MACjB,IAAIc,KACJA,GAAsB,GAAgB,OACtCA,EAAsB,GAAiB,QACvCA,EAAsB,GAAmB,UACzCA,EAAsB,GAAoB,UAC1C,IAAIC,IACA,EAAGL,EAAAA,EACHM,EAAG,EAAU/B,EAAKS,OAClBuB,EAAG,IAAUhC,EAAKS,OAClBwB,EAAI,EAAI,EAAKjC,EAAKS,OAClByB,EAAG,GAAUlC,EAAKS,OAClB0B,EAAGV,EAAAA,EACHW,EAAI,EAAI,EAAKpC,EAAKS,OAClB4B,EAAG,IAAUrC,EAAKS,OAClB6B,EAAG,IAAUtC,EAAKS,OAClB8B,EAAI,EAAI,EAAKvC,EAAKS,OAClB+B,GAAIf,EAAAA,EACJgB,GAAI,EAAUzC,EAAKS,OACnBiC,GAAK,EAAI,EAAK1C,EAAKS,OACnBkC,GAAI,IAAU3C,EAAKS,OACnBmC,GAAI,GAAU5C,EAAKS,OACnBoC,GAAIpB,EAAAA,GAEJZ,EAAS,WACT,QAASA,GAAOiC,EAAGC,EAAGC,GAClBC,KAAKH,EAAIA,EACTG,KAAKF,EAAIA,EACTE,KAAKD,UAAYA,EACjBC,KAAKC,eAAiB,EACtBD,KAAKE,aAAe,EACpBF,KAAKG,UAAY,EACjBH,KAAKI,iBAAmB,EACxBJ,KAAKK,kBAAmB,EAmF5B,MAjFAzC,GAAO0C,UAAUC,OAAS,SAAUC,GAChCR,KAAKD,WAAaC,KAAKD,UAAYS,EAAQzD,EAAKS,QAAWT,EAAW,QAE1Ea,EAAO0C,UAAUG,KAAO,SAAUC,EAAUC,EAAKZ,GAC7CC,KAAKY,KAAKF,EAAUC,EAAKX,KAAKD,UAAYA,IAE9CnC,EAAO0C,UAAUM,KAAO,SAAUF,EAAUC,EAAKZ,GAC7C,GAAIc,GAAKxD,KAAKyD,IAAIf,GAAaW,EAC3BK,EAAK1D,KAAK2D,IAAIjB,GAAaW,CAC3BC,GAAIM,IAAIjB,KAAKH,EAAIgB,EAAIb,KAAKF,IAAM,IAChCE,KAAKH,GAAKgB,GAEVF,EAAIM,IAAIjB,KAAKH,EAAGG,KAAKF,EAAIiB,IAAO,IAChCf,KAAKF,GAAKiB,IAIlBnD,EAAO0C,UAAUY,qBAAuB,SAAUC,GAC9CnB,KAAKC,eAAiBlD,EAAKC,MAAMgD,KAAKC,eAAiBkB,EAAO7C,EAAgBD,IAElFT,EAAO0C,UAAUc,mBAAqB,SAAUD,GAC5CnB,KAAKE,aAAenD,EAAKC,MAAMgD,KAAKE,aAAeiB,EAAO1C,EAAcF,IAE5EX,EAAO0C,UAAUe,gBAAkB,SAAUF,GACzCnB,KAAKG,UAAYpD,EAAKC,MAAMgD,KAAKG,UAAYgB,EAAOxC,EAAcD,IAEtEd,EAAO0C,UAAUgB,OAAS,SAAUC,EAAQZ,EAAKa,GAC7C,GAAIC,GAAgB,EAChBpB,GAAmB,CACvB,KAAK,GAAIN,KAAajC,GACdyD,EAAO3C,EAAsBmB,KAAeC,KAAK0B,aACjD1B,KAAKS,KAAK1C,EAAiByD,EAAUb,EAAK9B,EAAgBkB,IAC1DM,GAAmB,EACnBoB,IAAkB1B,EAGtBwB,GAAiB,UACjBvB,KAAKO,OAAO,GAAKvC,EAAwBX,KAAKI,GAAK+D,GAEnDD,EAAkB,WAClBvB,KAAKO,OAAOvC,EAAwBX,KAAKI,GAAK+D,GAE9CD,EAAe,QACfvB,KAAKqB,gBAAgBpD,EAAsBuD,GAE3CD,EAAiB,UACjBvB,KAAKqB,gBAAgB,GAAKpD,EAAsBuD,GAGhDxB,KAAKkB,qBADLK,EAAe,OACW,GAAKrD,EAAesD,EAGpBtD,EAAesD,GAEzCD,EAAa,MACTvB,KAAK0B,aACL1B,KAAKI,iBAAmB,EACxBuB,QAAQC,IAAIH,GACZE,QAAQC,UAAWH,IACnBA,EAAgB5C,EAAgB4C,GAChCzB,KAAKyB,cAAgBA,EAAgBzB,KAAKD,UAC1CC,KAAKK,iBAAoBoB,IAAkBjD,EAAAA,EAAY6B,GAAmB,GAG7EL,KAAK0B,YACF1B,KAAKK,kBACLL,KAAKY,KAAKxC,EAAaoD,EAAUb,EAAKX,KAAKyB,eAGnDzB,KAAKI,kBAA+B,GAAXoB,EACzBxB,KAAKoB,mBAAmBjD,EAAcqD,EAAWxB,KAAKI,mBAE1DxC,EAAO0C,UAAUuB,qBAAuB,WACpC,OACIC,eAAgB9B,KAAKC,eAAiBD,KAAKE,aAC3CC,UAAWH,KAAKG,YAGxBvC,EAAO0C,UAAUoB,SAAW,WACxB,MAAO1B,MAAKE,eAAiBzB,GAE1Bb,IAEXC,GAAQD,OAASA,GAClBA,EAASd,EAAOc,SAAWd,EAAOc,aACtCd,SAAWA,WC/Id,IAAIA,SACJ,SAAWA,GACP,GAAIiF,IACJ,SAAWC,GACP,GACID,IADajF,EAAOY,WAAWA,WACpB,WACX,QAASqE,KACL,GAAIE,GAAQjC,IACZA,MAAKkC,UACLlC,KAAKkC,OAAkB,UAAI,WAC3BlC,KAAKkC,OAAmB,WAAI,YAC5BlC,KAAKkC,OAAgB,QAAI,SACzBlC,KAAKkC,OAAkB,UAAI,WAC3BlC,KAAKkC,OAAO,IAAiB,OAC7BlC,KAAKkC,OAAO,IAAiB,QAC7BlC,KAAKkC,OAAO,IAAiB,UAC7BlC,KAAKkC,OAAO,IAAiB,WAC7BlC,KAAKkC,OAAO,IAAoB,WAChClC,KAAKkC,OAAO,IAAqB,YACjClC,KAAKkC,OAAO,IAAkB,SAC9BlC,KAAKkC,OAAO,IAAoB,WAChClC,KAAKkC,OAAO,IAAiB,SAC7BlC,KAAKkC,OAAO,IAAqB,OACjClC,KAAKuB,UACLY,EAAEC,KAAKD,EAAEE,OAAOrC,KAAKkC,QAAS,SAAUI,GACpCL,EAAMV,OAAOe,IAAS,IAE1BC,SAASC,iBAAiB,UAAWxC,KAAKyC,MAAMC,KAAK1C,MAAM,IAAO,GAClEuC,SAASC,iBAAiB,QAASxC,KAAKyC,MAAMC,KAAK1C,MAAM,IAAQ,GACjEuC,SAASC,iBAAiB,YAAaxC,KAAK2C,YAAYD,KAAK1C,OAAO,GACpEuC,SAASK,KAAKC,QAAUN,SAASK,KAAKE,oBAAsBP,SAASK,KAAKG,uBAAyBR,SAASK,KAAKI,yBAuDrH,MArDAjB,GAASzB,UAAUmC,MAAQ,SAAUQ,EAAKC,GACtC,GAAIC,GAAQnD,KAAKkC,OAAOgB,EAAEE,QACL,oBAAVD,KAGXnD,KAAKuB,OAAO4B,GAASF,EACjBC,EAAEG,gBACFH,EAAEG,iBAEFH,EAAEI,iBACFJ,EAAEI,oBAGVvB,EAASzB,UAAUqC,YAAc,SAAUO,GACvC,GAAIjB,GAAQjC,KACRuD,EAAYvD,KAAKkC,OAAkB,UACnCsB,EAAaxD,KAAKkC,OAAmB,WACrCuB,EAAUzD,KAAKkC,OAAgB,QAC/BwB,EAAY1D,KAAKkC,OAAkB,UACnCrC,EAAKqD,EAAES,WAAaT,EAAEU,cAAgBV,EAAEW,iBAAmB,EAC3D/D,EAAKoD,EAAEY,WAAaZ,EAAEa,cAAgBb,EAAEc,iBAAmB,CAC3DnE,GAAI,EACJG,KAAKuB,OAAOiC,IAAc,EAEjB,EAAJ3D,IACLG,KAAKuB,OAAOgC,IAAa,GAEzBzD,EAAI,EACJE,KAAKuB,OAAOmC,IAAa,EAEhB,EAAJ5D,IACLE,KAAKuB,OAAOkC,IAAW,GAE3BQ,WAAW,WACPhC,EAAMiC,eAAehB,IACtB,KAEPnB,EAASzB,UAAU4D,eAAiB,SAAUhB,GAC1C,GAAIK,GAAYvD,KAAKkC,OAAkB,UACnCsB,EAAaxD,KAAKkC,OAAmB,WACrCuB,EAAUzD,KAAKkC,OAAgB,QAC/BwB,EAAY1D,KAAKkC,OAAkB,SACvClC,MAAKuB,OAAOgC,IAAa,EACzBvD,KAAKuB,OAAOiC,IAAc,EAC1BxD,KAAKuB,OAAOkC,IAAW,EACvBzD,KAAKuB,OAAOmC,IAAa,EACrBR,EAAEG,gBACFH,EAAEG,iBAEFH,EAAEI,iBACFJ,EAAEI,mBAGHvB,KAEXC,GAAUD,SAAWA,GACtBA,EAAWjF,EAAOiF,WAAajF,EAAOiF,eAC1CjF,SAAWA,WCzFd,IAAIA,SACJ,SAAWA,GACP,GAAIqH,IACJ,SAAWC,GACP,GAAID,GAAS,WACT,QAASA,GAAOE,EAAKC,EAAOC,GACxBvE,KAAKwE,MAAQ,GAAIC,OACjBzE,KAAKwE,MAAMH,IAAMA,EACjBrE,KAAKsE,MAAQA,EACbtE,KAAKuE,OAASA,EAElB,MAAOJ,KAEXC,GAAQD,OAASA,GAClBA,EAASrH,EAAOqH,SAAWrH,EAAOqH,aACtCrH,SAAWA,WCfd,IAAIA,SACJ,SAAWA,GACP,GAAI4H,IACJ,SAAWC,GACP,GAAIR,GAASrH,EAAOqH,OAAOA,OACvBS,EAA2B,GAC3BC,GACAC,OAAQtG,EAAAA,GAERkG,EAAU,WACV,QAASA,GAAQK,GACb/E,KAAK+E,KAAOA,EACZ/E,KAAKgF,SAAW,GAAIC,YAAWF,EAAOA,GACtC/E,KAAKkF,OAAS,GAAIf,GAAO,mCAAoC,IAAK,IAClEnE,KAAKmF,YAAc,GAAIhB,GAAO,oCAAqC,IAAK,KA+D5E,MA7DAO,GAAQpE,UAAUW,IAAM,SAAUpB,EAAGC,GAGjC,MAFAD,GAAIxC,KAAK+H,MAAMvF,GACfC,EAAIzC,KAAK+H,MAAMtF,GACN,EAAJD,GAAWA,GAAKG,KAAK+E,MAAc,EAAJjF,GAAWA,GAAKE,KAAK+E,KAC9C,GAGA/E,KAAKgF,SAAUlF,EAAIE,KAAK+E,KAAQlF,IAG/C6E,EAAQpE,UAAU+E,UAAY,SAAUC,GAChB,SAAhBA,IAA0BA,EAAcV,EAE5C,KAAK,GADDW,GAAkBD,EACbE,EAAI,EAAGA,EAAKxF,KAAK+E,KAAO/E,KAAK+E,KAAOS,IACzCxF,KAAKgF,SAASQ,GAAMnI,KAAKoI,SAAWF,EAAkB,EAAI,GAGlEb,EAAQpE,UAAUoF,KAAO,SAAUC,EAAOnF,EAAOoF,GAW7C,QAASC,GAAIC,GACT,GAAIC,GAAQC,EAAKhF,EAAKF,EAAKgF,EAAOjG,EAAGiG,EAAOhG,GAAG,GAC3CmG,EAAQD,EAAKlF,EAAKE,EAAK8E,EAAOhG,EAAGgG,EAAOjG,GAAG,GAC3CqG,EAAYH,EAAMjB,OAASmB,EAAMnB,OAAUqB,EAAQJ,EAAO,EAAG,EAAGD,EAAOpF,SAAUqF,EAAMjG,GAAKqG,EAAQF,EAAO,EAAG,EAAGH,EAAOpF,SAAUuF,EAAMpG,EAC5I,OAAIqG,GAASxF,SAAWkF,GACZE,IAGAA,GAAQM,OAAOP,EAAIK,IAGnC,QAASF,GAAKK,EAAMC,EAAKzG,EAAGC,EAAGyG,GAC3B,GAAY,IAARD,EACA,MAAOzB,EAEX,IAAIhE,GAAMyF,EAAM,EAAKjJ,KAAK+H,MAAMvF,EAAI,GAAKA,EAAIxC,KAAKmJ,KAAK3G,EAAI,GAAKA,EAC5DkB,EAAKF,GAAMwF,EAAOC,GAClBJ,GACArG,EAAG0G,EAAWzG,EAAIiB,EAAKlB,EAAIgB,EAC3Bf,EAAGyG,EAAW1G,EAAIgB,EAAKf,EAAIiB,EAC3B+D,OAAQjE,EAAKA,EAAKE,EAAKA,EAE3B,OAAOmF,GAEX,QAASC,GAAQH,EAAMS,EAAQC,EAAQhG,EAAUiG,GAC7C,GAAI9F,GAAW,EAANC,EAAU2F,EAAS,EACxB1F,EAAW,EAANC,EAAU0F,EAAS,CAI5B,OAHAV,GAAKzB,OAASqC,EAAK3F,IAAI+E,EAAKnG,EAAIgB,EAAImF,EAAKlG,EAAIiB,GAC7CiF,EAAKtF,SAAWA,EAAWrD,KAAKwJ,KAAKb,EAAKlB,QAC1CkB,EAAKW,OAASA,EAAStJ,KAAK+H,MAAMuB,GAC3BX,EAxCX,GAAIY,GAAO5G,KACPgB,EAAM3D,KAAK2D,IAAIR,GACfM,EAAMzD,KAAKyD,IAAIN,GACfsF,GACAjG,EAAG8F,EAAM9F,EACTC,EAAG6F,EAAM7F,EACTyE,OAAQ,EACR7D,SAAU,EAEd,OAAOmF,GAAIC,IAkCRpB,IAEXC,GAASD,QAAUA,GACpBA,EAAU5H,EAAO4H,UAAY5H,EAAO4H,cACxC5H,SAAWA,WCjFd,IAAIA,SACJ,SAAWA,GACP,GAAIgK,IACJ,SAAWC,GACP,GAKIC,GALAjK,EAAOD,EAAOC,KACdkK,EAAiB,GACjBC,EAAuB,GACvBC,EAAgB,GAChBC,EAAkB,IAElBN,EAAS,WACT,QAASA,GAAOO,EAAQC,EAAYC,EAAa3B,GACzB,SAAhB2B,IAA0BA,EAAcL,GAC9B,SAAVtB,IAAoBA,EAAQuB,GAChCnH,KAAKwH,QAAUH,EAAOI,WAAW,MACjCzH,KAAKsE,MAAQ+C,EAAO/C,MAAQoD,OAAOC,WAAaV,EAChDjH,KAAKuE,OAAS8C,EAAO9C,OAASmD,OAAOE,YAAcX,EACnDjH,KAAKsH,WAAaA,EAClBtH,KAAK6H,QAAU7H,KAAKsE,MAAQgD,EAC5BtH,KAAKuH,YAAcA,EACnBvH,KAAK4F,MAAQA,EACboB,EAAoBI,GAAmBpH,KAAKsE,MAAQtE,KAAKuE,QACzDvE,KAAKG,UAAY,EACjBH,KAAK8H,aAAe,EA2DxB,MAzDAhB,GAAOxG,UAAUyH,OAAS,SAAUC,EAAQrH,GACxCX,KAAKG,UAAY6H,EAAOnG,uBAAuB1B,UAC/CH,KAAK8H,aAAeE,EAAOnG,uBAAuBC,eAClD9B,KAAKiI,QAAQD,EAAOjI,UAAWY,EAAIuE,QACnClF,KAAKkI,YAAYF,EAAQrH,IAE7BmG,EAAOxG,UAAU2H,QAAU,SAAUlI,EAAWoI,GAC5C,GAAIlG,GAAQjC,KACRsE,EAAQ6D,EAAI7D,OAAStE,KAAKuE,OAAS4D,EAAI5D,QAAUyC,EACjDoB,EAAQrI,EAAYhD,EAAKS,QAAW8G,CACxCtE,MAAKwH,QAAQa,MACb,IAAIC,GAAiB,SAAUC,GAC3BtG,EAAMuF,QAAQgB,UAAUL,EAAI3D,MAAO+D,EAAetG,EAAM9B,UAAaiH,EAAkB,EAAKnF,EAAM6F,aAAcxD,EAAOrC,EAAMsC,OAAS6C,EAAkBnF,EAAM6F,cAElKQ,GAAeF,GACXA,EAAO9D,EAAQtE,KAAKsE,OACpBgE,EAAeF,EAAO9D,GAE1BtE,KAAKwH,QAAQiB,WAEjB3B,EAAOxG,UAAU4H,YAAc,SAAUF,EAAQrH,GAC7CX,KAAKwH,QAAQa,MACb,KAAK,GAAIK,GAAS,EAAGA,EAAS1I,KAAKsH,WAAYoB,IAAU,CACrD,GAAI7I,GAAI6I,EAAS1I,KAAKsH,WAAa,GAC/B9G,EAAQnD,KAAKsL,MAAM9I,EAAGG,KAAKuH,aAC3B1B,EAAMlF,EAAI+E,KAAKsC,EAAQA,EAAOjI,UAAYS,EAAOR,KAAK4F,MAC1D5F,MAAK4I,WAAWF,EAAQ7C,EAAKrF,EAAOG,GAExCX,KAAKwH,QAAQiB,WAEjB3B,EAAOxG,UAAUsI,WAAa,SAAUF,EAAQ7C,EAAKrF,EAAOG,GAMxD,IALA,GAAI6G,GAAUxH,KAAKwH,QACfqB,EAAUlI,EAAIwE,YACdiD,EAAO/K,KAAK+H,MAAMsD,EAAS1I,KAAK6H,SAChCvD,EAAQjH,KAAKmJ,KAAKxG,KAAK6H,SACvBiB,EAAM,EACHA,EAAMjD,EAAIf,QAAUe,EAAIiD,GAAKvE,QAAU,GAC1CuE,GAEJ,KAAK,GAAIC,GAAIlD,EAAIf,OAAS,EAAGiE,GAAK,EAAGA,IAAK,CACtC,GAAI/C,GAAOH,EAAIkD,EACf,IAAIA,IAAMD,EAAK,CACX,GAAIE,GAAW3L,KAAK+H,MAAMyD,EAAQvE,MAAQ0B,EAAKW,QAC3CsC,EAAOjJ,KAAKkJ,QAAQlD,EAAKzB,OAAQ/D,EAAOwF,EAAKtF,SACjD8G,GAAQgB,UAAUK,EAAQrE,MAAOwE,EAAU,EAAG,EAAGH,EAAQtE,OAAQ6D,EAAMa,EAAKE,IAAMnJ,KAAKG,UAAYH,KAAK8H,aAAcxD,EAAO2E,EAAK1E,OAASvE,KAAK8H,iBAI5JhB,EAAOxG,UAAU4I,QAAU,SAAU3E,EAAQ/D,EAAOE,GAChD,GAAI0I,GAAI1I,EAAWrD,KAAKyD,IAAIN,GACxB6I,EAAarJ,KAAKuE,OAASA,EAAS6E,EACpCE,EAAStJ,KAAKuE,OAAS,GAAK,EAAI,EAAI6E,EACxC,QACID,IAAKG,EAASD,EACd9E,OAAQ8E,IAGTvC,IAEXC,GAAQD,OAASA,GAClBA,EAAShK,EAAOgK,SAAWhK,EAAOgK,aACtChK,SAAWA,WCtFd,IAAIA,SACJ,SAAWA,GACP,GAAIyM,IACJ,SAAWC,GACP,GAAIC,GAAmB,EAAI,GACvBC,EAA0B,IAC1BH,EAAW,WACX,QAASA,GAAS/H,GACG,SAAbA,IAAuBA,EAAWiI,GACtCzJ,KAAK2J,cAAgB3J,KAAK4J,MAAMlH,KAAK1C,MACrCA,KAAK6J,SAAW,EAChB7J,KAAK8J,YAAc,EACnB9J,KAAKwB,SAAWA,EAChBxB,KAAK+J,eAAiB,aAEtB/J,KAAKgK,eAAiB,aAmB1B,MAhBAT,GAASjJ,UAAU2J,MAAQ,SAAUF,EAAgBC,GACjDhK,KAAK+J,eAAiBA,EACtB/J,KAAKgK,eAAiBA,EACtBtC,OAAOwC,sBAAsBlK,KAAK2J,gBAEtCJ,EAASjJ,UAAUsJ,MAAQ,SAAUO,GACjC,GAAIC,IAAWD,EAAOnK,KAAK6J,UAAYH,CAGvC,KAFA1J,KAAK6J,SAAWM,EAChBnK,KAAK8J,aAAeM,EACbpK,KAAK8J,aAAe9J,KAAKwB,UAC5BxB,KAAK8J,aAAe9J,KAAKwB,SACzBxB,KAAK+J,eAAe/J,KAAKwB,SAE7BxB,MAAKgK,iBACLtC,OAAOwC,sBAAsBlK,KAAK2J,gBAE/BJ,IAEXC,GAAUD,SAAWA,GACtBA,EAAWzM,EAAOyM,WAAazM,EAAOyM,eAC1CzM,SAAWA,WCtCd,IAAIA,SACJ,SAAWA,GACP,GAAIuN,IACJ,SAAWA,GAMP,QAASC,KACL,GAAIC,GAAUhI,SAASiI,eAAe,WAClCC,EAAS,GAAI7M,GAAO,KAAM,KAAgB,GAAVP,KAAKI,IACrCkD,EAAM,GAAI+D,GAAQ,IAClBgG,EAAW,GAAI3I,GACf4I,EAAS,GAAI7D,GAAOyD,EAAS,IAAK,IAClCK,EAAO,GAAIrB,EACf5I,GAAI0E,YACJuF,EAAKX,MAAM,SAAwBzI,GAC/BiJ,EAAOnJ,OAAOoJ,EAASnJ,OAAQZ,EAAKa,IACrC,WACCmJ,EAAO5C,OAAO0C,EAAQ9J,KAhB9B,GAAImG,GAAShK,EAAOgK,OAAOA,OACvB/E,EAAWjF,EAAOiF,SAASA,SAC3BwH,EAAWzM,EAAOyM,SAASA,SAC3B7E,EAAU5H,EAAO4H,QAAQA,QACzB9G,EAASd,EAAOc,OAAOA,MAe3ByM,GAAKC,KAAOA,GACbD,EAAOvN,EAAOuN,OAASvN,EAAOuN,WAClCvN,SAAWA,YACdA,OAAOuN,KAAKC"}