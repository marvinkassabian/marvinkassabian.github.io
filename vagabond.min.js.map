{"version":3,"file":"vagabond.min.js","sources":["../vagabond/resources/js/vagabond.js","../vagabond/resources/js/datastructures/matrix.js","../vagabond/resources/js/datastructures/graph.js","../vagabond/resources/js/algorithms.js","../vagabond/resources/js/maps/map.js","../vagabond/resources/js/maps/factory.js","../vagabond/resources/js/entities/entity.js","../vagabond/resources/js/entities/killableentity.js","../vagabond/resources/js/entities/movablekillableentity.js","../vagabond/resources/js/entities/monster.js","../vagabond/resources/js/entities/enemies/goblin.js","../vagabond/resources/js/controls/listener.js","../vagabond/resources/js/controls/controller.js","../vagabond/resources/js/screen.js","../vagabond/resources/js/level.js","../vagabond/resources/js/main.js"],"names":["global","VAGABOND","namespace","i","j","d","a","arguments","o","length","split","writeToLog","string","log","document","body","getElementsByClassName","line","createElement","innerText","insertBefore","firstChild","this","call","DATA_STRUCTURES","MATRIX","module","Matrix","init","h","w","defaults","grid","height","width","setDefaults","UTIL","extend","initValue","formatValue","value","formatReturn","ret","formatting","OPEN","SEPERATOR","CLOSE","initGrid","initValueFunc","undefined","set","get","x","y","isValidCoordinate","wrappedGet","wrappedCoor","wrapCoor","wrappedSet","clampedGet","clampedCoor","clampCoor","clampedSet","clamp","wrap","clone","Object","create","JSON","parse","stringify","toString","options","comma","GRAPH","Vertex","id","weight","neighbors","entities","Graph","weightMatrix","vertexMatrix","vertices","vertexCount","vertex","k","move","neighbor","ADJACENT","push","adjacent","indexOf","getEdgeValue","Math","max","getVertex","ALGORITHMS","diamondSquare","matrix","scale","diamondSquareStep","step","diamondStep","possibleCoors","getDiamondCoors","computeNewValue","squareStep","getSquareCoors","coor","newValue","validCoorCount","random","halfStep","floor","size","cellularAutomata","rep","normalize","getNextGenCell","newX","newY","cell","maxCell","Infinity","counters","pastMatrix","getNextCell","bind","aStar","graph","startCoor","endCoor","cleanVertex","pathWeight","heuristic","manhattanDistance","getTotal","previousVertex","vertexX","vertexY","abs","toMoveArray","previous","unshift","dx","dy","dirtyVertices","remaining","found","vertexID","sort","b","pop","MAPS","Map","renderTo","screen","offset","getOrigin","generate","FACTORY","createHeightMap","heightMap","type","WALL_WEIGHT","createDungeonMap","dungeonMap","ENTITIES","Entity","char","actionCounts","main","secondary","minor","takeTurn","getTraits","replacer","space","formatEntity","entity","offsettedX","offsettedY","KillableEntity","hp","MovableKillableEntity","movement","isValidMove","level","map","isOccupied","entityPool","Monster","name","ENEMIES","getRandomMove","moves","randomMove","origin","destination","Goblin","generateUUID","attack","playerCoor","player","currentPosition","distance","takeNextMove","nextMove","nextMoves","shift","CONTROLS","VirtualKeys","VIRTUAL_KEYS","Listener","eventStack","codes","VK_LEFT","VK_RIGHT","VK_UP","VK_DOWN","VK_A","VK_D","VK_W","VK_S","VK_SPACE","VK_1","VK_2","VK_RETURN","VK_CONTROL","addEventListener","onKey","e","state","keyCode","render","preventDefault","stopPropagation","debugMapTesting","event","MAP_FACTORY","Controller","listener","processInput","avatar","eventBlob","screenUp","useTurn","screenDown","screenLeft","screenRight","charUp","charDown","charLeft","charRight","renderToElement","SCREEN","Screen","originX","originY","clear","toElement","tileElement","formatElement","className","innerHTML","appendChild","element","screenElement","LEVEL","Level","addEntity","args","Array","argIndex","prototype","apply","setPlayer","milo","otis","henry","controller","func","setTimeout"],"mappings":"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"}